# ─────────────────────────────────────────────
# Auto-assign windows to workspaces
# (equivalent to i3 assign + for_window workspace)
# ─────────────────────────────────────────────

# Obsidian → workspace 6
windowrule {
  name = obsidian
  workspace = 6
  match:class = ^(obsidian)$
}

# Discord + Telegram + Pachca → workspace 7
windowrule {
  name = Discord
  workspace = 7
  group = 0
  match:class = ^(discord)$
}

windowrule {
  name = TelegramDesktop
  workspace = 7
  group = set
  match:class = ^(org.telegram.desktop)$
}

windowrule {
  name = pachca
  workspace = 7
  match:class = ^(Pachca)$
}

# Spotify → workspace 8
windowrule {
  name = Spotify
  workspace = 8
  match:class = ^(Spotify)$
}

# OBS Studio → workspace 10
windowrule {
  name = obs
  workspace = 10
  match:class = ^(obs)$
}

# OBS Studio → workspace 10
windowrule {
  name = amneziavpn
  float = off
  workspace = 11
  match:class = ^(AmneziaVPN)$
}


# Optional: open silently (no focus/switch) – very useful for startup apps
# windowrulev2 = workspace 7 silent, class:^(discord)$

# ─────────────────────────────────────────────
# Try to emulate "layout tabbed" using groups
# (best-effort – not perfect without hy3)
# ─────────────────────────────────────────────

# When these apps open → put them into a group automatically
# (you can later use mod + G / mod + tab / etc to manage the group)

# Example windowrule v1
# windowrule = float, ^(kitty)$
# Example windowrule v2
# windowrulev2 = float,class:^(kitty)$,title:^(kitty)$
# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# https://itsohen.github.io/hyprrulefix/ v2 -> v3
windowrule {
  name = windowrule-1
  suppress_event = maximize
  match:class = .*
}


windowrule {
  name = windowrule-2
  float = on
  pin = on
  match:title = ^(Picture(-|\s)in(-|\s)(p|P)icture)$
}


windowrule {
  name = windowrule-3
  float = on
  size = (monitor_w*0.5) (monitor_h*0.5)
  match:class = org.pulseaudio.pavucontrol
}


windowrule {
  name = windowrule-4
  float = on
  size = (monitor_w*0.5) (monitor_h*0.5)
  match:class = nemo
}

windowrule {
  name = satty
  float = on
  size = (monitor_w*0.75) (monitor_h*0.75)
  match:class = com.gabm.satty
}


# windowrule {
#   name = windowrule-5
#   float = on
#   size = (monitor_w*0.5) (monitor_h*0.5)
#   match:class = zen
#   match:title = ^Zen Browser$
# }



# windowrulev2 = noborder,class:^(zen)$,title:^(Picture-in-Picture)$
# windowrulev2 = pin,class:^(zen)$,title:^(Picture-in-Picture)$
# windowrulev2 = float,class:^(zen)$,title:^(Picture-in-Picture)$


windowrule {
  name = windowrule-8
  float = on
  match:title = Bitwarden
}


windowrule {
  name = windowrule-9
  float = on
  match:class = ^(com.github.hluk.copyq)$
}



# Prevent tooltips from taking focus (always have a title of `win.<id>`)
windowrule {
  name = windowrule-10
  no_initial_focus = on
  match:class = ^(.*jetbrains.*)$
  match:title = ^(win.*)$
}

# Make "Go to file" and other dialogs always focused when open
windowrule {
  name = windowrule-11
  stay_focused = on
  match:class = ^(.*jetbrains.*)$
  match:title = ^$
  match:float = 1
}

# fix tab dragging (always have a single space character as their title)
windowrule {
  name = windowrule-12
  no_initial_focus = on
  match:class = ^(.*jetbrains.*)$
  match:title = ^\\s$
}

# Tile new tabs automatically
windowrule {
  name = windowrule-13
  tile = on
  match:class = ^(jetbrains-*)
  match:float = 0
}


# Fix splash screen showing in weird places and prevent annoying focus takeovers
windowrule {
  name = windowrule-14
  tag = +jetbrains-splash
  match:class = ^(jetbrains-.*)$
  match:title = ^(splash)$
  match:float = 1
}

windowrule {
  name = windowrule-15
  center = on
  no_focus = on
  border_size = 0
  match:tag = jetbrains-splash
}


# Center popups/find windows
windowrule {
  name = windowrule-16
  tag = +jetbrains
  min_size = (monitor_w*0.5) (monitor_h*0.5)
  match:class = ^(jetbrains-.*)
  match:title = ^()$
  match:float = 1
}

windowrule {
  name = windowrule-17
  center = on
  stay_focused = on
  border_size = 0
  match:tag = jetbrains
}


# Enabling this makes it possible to provide input in popup dialogs (search window, new file, etc.)

# For some reason tag:jetbrains does not work for size rule

# Disable window flicker when autocomplete or tooltips appear
windowrule {
  name = windowrule-18
  no_initial_focus = on
  match:class = ^(jetbrains-.*)$
  match:title = ^(win.*)$
  match:float = 1
}


# # Disable mouse focus
# windowrule = nofollowmouse, class:^(jetbrains-.*)$


# windowrule {
#   name = windowrule-25
#   opacity = 0.98 0.98
#   match:class = ^(jetbrains-.*)$
# }
#
# windowrule {
#   name = windowrule-26
#   opacity = 0.9 0.9
#   match:class = spotify
# }
#
# windowrule {
#   name = windowrule-goland
#   opacity = 0.9 0.9
#   match:class = jetbrains-goland
# }


#Float Steam windows by default, but tile main client if desired
# windowrule = float, class:^()$,title:^(Steam - Self Updater)$
windowrule {
  name = windowrule-27
  float = on
  workspace = 5
  match:class = ^(steam)$
}


# Tile specific Steam sub-windows (e.g., Friends List) to avoid floating everything
windowrule {
  name = windowrule-28
  tile = on
  size = (monitor_w*0.3) (monitor_h*1)
  match:class = ^(steam)$
  match:title = Friends List
}

windowrule {
  name = windowrule-29
  tile = on
  size = (monitor_w*0.7) (monitor_h*1)
  match:class = ^(steam)$
  match:title = Steam
}


# Fix disappearing dropdown menus in Steam (common XWayland issue)
windowrule {
  name = windowrule-30
  stay_focused = on
  min_size = 1 1
  match:title = ^()$
  match:class = ^(steam)$
}


# Minimum size for Friends List popup to prevent tiny windows
windowrule {
  name = windowrule-31
  min_size = 280 635
  match:class = ^(steam)$
  match:title = ^(Friends.*)$
}

# Assign Steam to a specific workspace (e.g., workspace 9)

# Split Steam and Friends List windows (e.g., 70% main, 30% friends)

# Fullscreen all games (ignores borders for immersion)
windowrule {
  name = windowrule-32
  fullscreen = on
  match:class = ^(gamescope)$
}

windowrule {
  name = windowrule-33
  fullscreen = on
  opacity = 1.0 override
  match:class = ^(steam_app_.*)$
}

# Force opacity 1.0 for fullscreen games (prevents transparency issues)
windowrule {
  name = windowrule-34
  opacity = 1.0 override
  match:fullscreen = 1
}

# Example for a specific game (e.g., Path of Exile, appid 238960)
windowrule {
  name = windowrule-35
  fullscreen = on
  match:class = ^(steam_app_238960)$
}


# Mark windows as "game" content for better handling (e.g., immediate focus)
windowrule {
  name = windowrule-36
  immediate = on
  match:content = game
}

windowrule {
  name = windowrule-37
  content = game
  match:initial_class = ^(steam_app_\d+)$
}
